/* rekord-ajax 1.4.1 - A dependency free AJAX implementation of Rekord.rest by Philip Diffenderfer */
!function(e,t,s){function a(e){this.database=e}function n(e){return e.api?new a(e):h.call(this,e)}function i(e,t){e.send(t.data)}var o=t.copy,r=t.noop,u=t.isEmpty,c=t.isNumber,h=t.rest,p=e.XMLHttpRequest||r,l="withCredentials"in new p?p:e.XDomainRequest,d=e.clearTimeout,f=e.setTimeout;a.prototype={removeTrailingSlash:function(e){return"/"===e.charAt(e.length-1)?e.substring(0,e.length-1):e},all:function(e,t){this.execute("GET",null,s,this.database.api,e,t,[])},get:function(e,t,a){this.execute("GET",e,s,this.removeTrailingSlash(this.database.api+e.$key()),t,a)},create:function(e,t,s,a){this.execute("POST",e,t,this.removeTrailingSlash(this.database.api),s,a,{})},update:function(e,t,s,a){this.execute("PUT",e,t,this.removeTrailingSlash(this.database.api+e.$key()),s,a,{})},remove:function(e,t,a){this.execute("DELETE",e,s,this.removeTrailingSlash(this.database.api+e.$key()),t,a,{})},query:function(e,t,s,a){var n=u(t)?"GET":"POST";this.execute(n,null,t,e,s,a)},execute:function(e,a,n,i,u,h,T){if(t.debug(t.Debugs.REST,this,e,i,n),t.forceOffline)h(T,0);else{var m,x,y=o(t.Ajax.options),g=y.headers=y.headers||{},v=y.cors||y.useXDR?new l:new p;y.method=e,y.url=i,y.data=n,t.Ajax.adjustOptions(y,this.database,e,a,n,i,u,h);var b=function(){4===v.readyState&&j()},S=function(){var e;v.response?e=v.response:"text"!==v.responseType&&v.responseType||(e=v.responseText||v.responseXML);try{e=JSON.parse(e)}catch(t){}return e},j=function(){if(!m){var e=(y.useXDR&&v.status===s?200:1223===v.status?204:v.status)||0,t=S();0!==e?u(t):h(t,0),u=r,h=r,d(x)}},E=function(){h(null,0),h=r,u=r,d(x)},R=function(){m=!0,v.abort("timeout"),E()};if(g.Accept="application/json","GET"!==e&&"HEAD"!==e&&(g["Content-Type"]="application/json",y.data=JSON.stringify(y.data)),v.onreadystatechange=b,v.onload=j,v.onerror=E,v.onprogress=function(){},v.ontimeout=E,v.open(y.method,y.url,!0,y.username,y.password),v.withCredentials=!!y.withCredentials,c(y.timeout)&&y.timeout>0&&(x=f(R,y.timeout)),v.setRequestHeader)for(var w in g)g.hasOwnProperty(w)&&v.setRequestHeader(w,g[w]);t.Ajax.ajax(v,y)}}},t.setRest(n,!0),t.Ajax={rest:n,options:{},adjustOptions:r,ajax:i,RestClass:a}}(this,this.Rekord);
//# sourceMappingURL=rekord-ajax.min.js.map
