/* rekord-ajax 1.4.2 - A dependency free AJAX implementation of Rekord.rest by Philip Diffenderfer */
!function(e,t){"function"==typeof define&&define.amd?define(["Rekord"],function(n){return t(e,n)}):"object"==typeof module&&module.exports?module.exports=t(global,require("Rekord")):e.Rekord=t(e,e.Rekord)}(this,function(e,t,n){function a(e){this.database=e}function s(e){return e.api?new a(e):d.call(this,e)}function i(e,t){e.send(t.data)}var o=t.copy,r=t.noop,u=t.isEmpty,c=t.isNumber,d=t.rest,p=e.XMLHttpRequest||r,l="withCredentials"in new p?p:e.XDomainRequest,h=e.clearTimeout,f=e.setTimeout;return a.prototype={removeTrailingSlash:function(e){return"/"===e.charAt(e.length-1)?e.substring(0,e.length-1):e},all:function(e,t){this.execute("GET",null,n,this.database.api,e,t,[])},get:function(e,t,a){this.execute("GET",e,n,this.removeTrailingSlash(this.database.api+e.$key()),t,a)},create:function(e,t,n,a){this.execute("POST",e,t,this.removeTrailingSlash(this.database.api),n,a,{})},update:function(e,t,n,a){this.execute("PUT",e,t,this.removeTrailingSlash(this.database.api+e.$key()),n,a,{})},remove:function(e,t,a){this.execute("DELETE",e,n,this.removeTrailingSlash(this.database.api+e.$key()),t,a,{})},query:function(e,t,n,a){var s=u(t)?"GET":"POST";this.execute(s,null,t,e,n,a)},execute:function(e,a,s,i,u,d,m){if(t.debug(t.Debugs.REST,this,e,i,s),t.forceOffline)d(m,0);else{var T,x,y=o(t.Ajax.options),g=y.headers=y.headers||{},b=y.cors||y.useXDR?new l:new p;y.method=e,y.url=i,y.data=s,t.Ajax.adjustOptions(y,this.database,e,a,s,i,u,d);var v=function(){4===b.readyState&&j()},R=function(){var e;b.response?e=b.response:"text"!==b.responseType&&b.responseType||(e=b.responseText||b.responseXML);try{e=JSON.parse(e)}catch(t){}return e},j=function(){if(!T){var e=(y.useXDR&&b.status===n?200:1223===b.status?204:b.status)||0,t=R();0!==e?u(t):d(t,0),u=r,d=r,h(x)}},S=function(){d(null,0),d=r,u=r,h(x)},E=function(){T=!0,b.abort("timeout"),S()};if(g.Accept="application/json","GET"!==e&&"HEAD"!==e&&(g["Content-Type"]="application/json",y.data=JSON.stringify(y.data)),b.onreadystatechange=v,b.onload=j,b.onerror=S,b.onprogress=function(){},b.ontimeout=S,b.open(y.method,y.url,!0,y.username,y.password),b.withCredentials=!!y.withCredentials,c(y.timeout)&&y.timeout>0&&(x=f(E,y.timeout)),b.setRequestHeader)for(var w in g)g.hasOwnProperty(w)&&b.setRequestHeader(w,g[w]);t.Ajax.ajax(b,y)}}},t.setRest(s,!0),t.Ajax={rest:s,options:{},adjustOptions:r,ajax:i,RestClass:a},t});
//# sourceMappingURL=rekord-ajax.min.js.map
